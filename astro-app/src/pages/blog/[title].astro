---
import type { MarkdownHeading, MarkdownInstance } from 'astro';
import BlogPost from '../../layouts/BlogPost.astro';

interface BlogProps {
    headings: Array<MarkdownHeading>
    post: MarkdownInstance<Record<string, any>>
}

export async function getStaticPaths() {
    const posts = await Astro.glob('../../content/articles/*.md');
    return posts.map((post) => {
        const headings = post.getHeadings();
        return {
            params: {
                title: headings[0].slug
            },
            props: {
                headings: headings,
                post: post
            }
        }
    })
}

const title = Astro.params;
const { headings, post } = Astro.props as BlogProps;

---
<BlogPost title={headings[0].text} headings={headings}>
    <post.Content/>
</BlogPost>